---
import Layout from '../../layouts/Layout.astro';
import ProblemList from '../../components/ProblemList.tsx';
import { capitalCase } from 'change-case'; // Helper for title generation

const { listId } = Astro.params;

// Determine the tag to filter by. Undefined means fetch all.
const tag = listId === 'all' ? undefined : listId;

// Generate a more user-friendly title
let pageTitle = 'Problems';
if (listId && listId !== 'all') {
  // Attempt to make a nice title, e.g., "Blind 75 Problems"
  pageTitle = `${capitalCase(listId)} Problems`;
} else if (listId === 'all') {
  pageTitle = 'All Problems';
}
---
<Layout>
  <main class="container mx-auto p-6">
    {/* Pass tag and title to the client-side rendered component */}
    <ProblemList client:load tag={tag} title={pageTitle} />
  </main>
</Layout>
